[[Общая теория по IT]]


## Процессы

Процесс — это то, что обычно называют запущенной программой на компьютере. Для запуска процесса операционная система выделяет область памяти. Обычно она изолирована, поэтому процессы не могут влиять на работу друг друга, изменяя области памяти, которые им не принадлежат. Часто бывает, что в системе мало ОЗУ, поэтому нет возможности создать много дочерних процессов. В этом случае придётся постоянно копировать всю память.

Для таких случаев придумали механизм Copy On Write (CoW). С ним нет необходимости постоянно копировать одни и те же данные для всех процессов. Вместо этого система позволяет всем дочерним процессам читать данные из памяти родительского процесса. При каких-либо изменениях система копирует в память дочернего процесса только обновлённый набор данных.

Также операционная система планирует работу процессов, выделяя для них время, в которое они могут работать. Из-за того, что у компьютера ограниченное количество ядер, операционная система не может позволить работать всем процессам одновременно. Она должна грамотно планировать работу, чтобы всем хватало процессорного времени.

## Потоки

Поток выполняет программу. Каждый процесс запускает как минимум один поток для выполнения кода. Процесс может создать столько потоков, сколько позволяют настройки операционной системы либо на сколько хватит ОЗУ.

Когда запускается процесс, ОС назначает для него память и ресурсы, а поток использует их. Если в процессе запущен один поток, то за один момент выполняется только одна операция. Если запущено несколько потоков, параллельно выполняются несколько операций, но не больше, чем ядер в системе. Важно понимать, что у потоков переключением управляет ОС.

Каждому потоку выделяется стек — область оперативной памяти. Потоки имеют общий доступ к общей памяти. Например, если в общей памяти хранится счётчик просмотров фильмов, то его можно читать и изменять из потоков в рамках процесса.

![[1_Thread_api_1633091567.png]]