[[многопоточный golang, конкурентность]]

[ссылка на статью на хабре](https://habr.com/ru/articles/490336/)

Каналом в языке Go называется одно- или двунаправленный канал, используемый для организации обмена (то есть приема и передачи) данными между двумя и более go-подпрограммами.

>[!info] Другое объяснение
>Каналы - это механизм взаимодействий между параллельно выполняющимися go-подпрограммами без применения блокировок

Вместе go-подпрограммы и каналы обеспечивают легковесный (т.е. масштабируемый) способ параллельного выполнения без использования разделяемой памяти и потому не требующий применения блокировок.

Go-подпрограмма создается с помощью инструкций `go` :
```Go
go func(параметры) { блок } (аргументы)

// либо

go функция(аргументы)
```
Инструкция go либо вызывает уже имеющуюся функцию, либо анонимную функцию, созданную на месте вызова инструкции.

Синтаксис работы с каналами:
```go
канал <- значение //Блокирующая передача
<- канал          // Прием данных и их уничтожение
x := <- канал     // Прием и сохранение данных
x, ok := <- канал // Как и выше, полюс проверка - открыт ли канал и имеются ли данные
```

Неблокирующую передачу можно выполнить с помощью инструкции `select` и до определенной степени - с помощью буферизованных каналов.
Каналы создаются с помощью встроенной функции `make()` :
```Go
make(chan Тип)
make(chan Тип, емкость)
```
Если емкость буфера не указана, будет создан ==синхронный канал==, т.е операция передачи данных будет блокироваться, пока принимающая сторона не будет готова принять их. Если емкость указана будет создан ==асинхронный канал==, обмен данными через который будет происходить без блокировки, при условии что в буфере достаточно места для отправляемых данных и при приеме в канале будут иметься данные.
По умолчанию создаются двунаправленные каналы (т.е. они позволяют посылать и принимать значения), но их можно сделать однонаправленными. Однако очень часто каналы , которые являются полями структур или передаются в виде параметров, являются однонаправленными, т.е. они позволяют либо только посылать либо только принимать значения. В таких случаях семантику использования канала можно выразить (и вынудить компилятор автоматически проверять ее), указывая направления работы канала. Например, тип `chan <- Тип` только принимать. 


Посылка через каналы значений таких типов как `bool`, `int`, `float64`, `string`, совершенно безопасна т.к. посылаются их копии, т.е. полностью отсутствует риск случайного одновременного обращения к одному и тому же значению из нескольких go-подпрограмм. 
Посылка указателей или ссылок через каналы небезопасна, потому что значения, на которые ссылаются указатели или ссылки, могут изменяться посылающей или принимающей go-подпрограммами, поэтому при посылке таких типов сообщений нужно обеспечить поочередный доступ.
Один из способов обеспечить последовательный доступ - использовать ==мьютексы==. Другой в соблюдении правила, согласно которому отправитель не должен обращаться к указателю или ссылке после отправки.

Через каналы так же можно отправлять интерфейсы, то есть значения, реализующие определенный интерфейс. Значения, реализующие интерфейсы, обеспечивающие доступ только для чтения, могут безопасно использоваться любым количеством горутин, но значения, реализующие интерфейсы, которые включают методы для изменения значения, должны обрабатываться подобно указателям - поочередно.


