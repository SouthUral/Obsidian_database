[[Разработка Web приложения на Golang]]


[ссылка на статью](https://habr.com/ru/articles/430300/)
[ссылка на Go kit](https://gokit.io/)
[туториал на Английском](https://gokit.io/examples/stringsvc.html#first-principles)

Go kit - это набор инструментов и библиотек для создания микросервисов на Go

Помимо набора библиотек для разработки микросервисов он предоставляет и поощряет использование хороших принципов проектирования архитектуры ваших сервисов. Go kit помогает придерживаться принципов SOLID, предметно-ориентированного подхода (DDD) и [гексагональной архитектуры](https://habr.com/post/267125/) предложенной _Alistair Cockburn_ или любых других подходов из архитектурных принципов известных как "[луковая архитектура](https://habr.com/post/233747/)" от _Jeffrey Palermo_ и "[чистая архитектура](https://habr.com/post/269589/)" от _Robert C. Martin_. Хотя Go kit был разработан как набор пакетов для разработки микросервисов, он также подходит и для разработки элегантных монолитов.

### Архитектура Go kit

Три главных уровня в архитектуре приложения разработанных с помощью Go kit это:
 - транспортный уровень;
 - уровень эндпоинтов;
 - уровень сервиса;

#### Транспортный уровень

Когда вы пишите микросервисы для распределенных систем, сервисам в них часто приходится общаться друг с другом используя различные транспортные протоколы, такие как: HTTP или gRPC, или использовать pub/sub системы, например NATS. Транспортный уровень в Go kit привязывается к конкретному транспортному протоколу (далее транспорт). Go kit поддерживает различный транспорт для работы вашего сервиса, такой как: HTTP, gRPC, NATS, AMQP и Thirft (_прим. пер. также вы можете разработать свой транспорт под свой протокол_). Поэтому сервисы написанные с помощью Go kit часто акцентируют внимание на реализации конкретной бизнес логики, которая ничего не знает о используемом транспорте, вы свободны использовать различные транспорты для одного и того же сервиса. Как пример, один сервис написанный на Go kit может одновременно предоставлять доступ к нему по HTTP и gRPC.

#### Эндпоинты

Конечная точка или эндпоинт — это фундаментальный "строительный кирпичик" для сервисов и клиентов. В Go kit основной паттерн общения — это RPC. Эндпоинт представляется как отдельный RPC метод. Каждый метод сервиса в Go kit преобразуется в эндпоинт, позволяющий общаться между сервером и клиентом в RCP стиле. Каждый эндпоинт выставляет наружу сервиса метод, используя Транспортный уровень, который в свою очередь использует различные транспортные протоколы, например HTTP или gRPC. Отдельный эндпоинт может выставляться наружу сервиса одновременно с помощью нескольких транспортов (_прим. пер. HTTP и gRPC на разных портах_).

#### Сервисы

Бизнес логика реализуется в сервисном слое. Сервисы, написанные с Go kit, проектируются как интерфейсы. Бизнес логика в сервисном слое содержит основное ядро бизнес логики, которая не должна знать ничего о используемых эндпоинтах или конкретном транспортном протоколе, как HTTP или gRPC, или о кодировании или декодировании запросов и ответов различных типов сообщений. Это позволит вам придерживаться чистой архитектуры в сервисах, написанных с помощью Go kit. Каждый метод сервиса преобразуется в эндпоинт с помощью адаптера и выставляется наружу с помощью конкретного транспорта. Благодаря использованию чистой архитектуры, отдельный метод может быть выставлен с помощью нескольких транспортов одновременно.